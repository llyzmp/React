# context 上下文

上下文： Context, 表示做某一些事情的环境

1. 当某个组件创建了上下文之后，上下文中的数据，会被所有后代组件共享
2. 如果某个组件依赖了上下文，会导致该组件不再纯粹(外部数据仅来源于属性props)
3. 一般情况下,用于第三方组件(通用组件)

## 旧的API

**创建上下文**
只有类组件才可以创建上下文

1. 给类组件书写静态属性 childContextTypes, 使用该属性对上下文中的数据类型进行约束
2. 添加实例方法 getChildContext, 该方法返回的对象,即为上下文中的数据,该数据必须满足类型约束
该方法会在每次render之后运行

**使用上下文中的数据**

要求: 如果要使用上下文中的数据,组件必须有一个静态属性contextTypes, 该属性描述了需要获取的上下文中的数据类型

1. 可以在组件的构造函数中,通过第二个参数,获取上下文数据
2. 从组件的context属性中获取
3. 在函数组件中,通过第二个参数,获取上下文数据

**上下文中的数据变化**

上下文中的数据不可以直接变化,最终都是通过状态改变

在上下文中加入一个处理函数,可以用于后代组件更改上下文数据