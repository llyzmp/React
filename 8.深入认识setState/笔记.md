# 深入认识setState

setState,它对状态改变可能是异步的,在状态改变后边输出值时有时候暂时没变(异步的)

> 如果改变状态的代码处于HTML元素的事件中,则其是异步的,否则是同步的

状态改变之后`this.setState()`有第二个参数回调函数,回调函数中是状态改变后处理一些事




多次同步调用`this.setState()`使用以下方式
`this.setState()`第一个参数可以是函数,函数的参数表示当前状态,该函数的返回值,会混合(覆盖掉)之前的状态,该函数是异步的

最佳实践:
1. 把所有的setState当做是异步的
2. 永远不要信任setState调用之后的状态
3. 如果要使用改变之后的状态,需要使用回调函数(setState的第二个参数)
4. 如果新的状态需要根据之前的状态进行计算,使用函数的方式改变状态(setState的第一个参数)


React会对异步的setState进行优化,将多次setState进行合并(将多次状态改变完成后,在统一对state进行改变,然后触发render)